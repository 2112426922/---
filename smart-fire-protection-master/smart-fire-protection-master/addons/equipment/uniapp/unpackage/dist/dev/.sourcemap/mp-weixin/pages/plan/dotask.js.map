{"version":3,"sources":["uni-app:///main.js","webpack:///D:/phpstudy_pro/WWW/www.test.com/addons/equipment/uniapp/pages/plan/dotask.vue?a183","webpack:///D:/phpstudy_pro/WWW/www.test.com/addons/equipment/uniapp/pages/plan/dotask.vue?d02d","webpack:///D:/phpstudy_pro/WWW/www.test.com/addons/equipment/uniapp/pages/plan/dotask.vue?84dd","webpack:///D:/phpstudy_pro/WWW/www.test.com/addons/equipment/uniapp/pages/plan/dotask.vue?6756","uni-app:///pages/plan/dotask.vue","webpack:///D:/phpstudy_pro/WWW/www.test.com/addons/equipment/uniapp/pages/plan/dotask.vue?119d"],"names":["wx","__webpack_require_UNI_MP_PLUGIN__","__webpack_require__","createPage","Page","renderjs","component","options","__file","components","render","_vm","this","_h","$createElement","g0","_self","_c","imgList","length","g1","$mp","data","Object","assign","$root","recyclableRender","staticRenderFns","_withStripped","fields","values","workIndex","workStatus","remark","type","onLoad","setTimeout","uni","taskId","taskType","methods","changeTitle","title","getInfo","id","value","optionArr","pickerChange","checkboxChange","items","textareaInput","pickerStatusChange","textareaRemark","chooseImage","count","sizeType","success","url","filePath","name","header","fail","viewImage","urls","current","delImg","content","cancelText","confirmText","cancelColor","confirmColor","submit","flag","images","form_data","string","eventChannel","ischange"],"mappings":"4IAAA,MAGA,aACA,YAFAA,EAAGC,kCAAoCC,EAGvCC,EAAWC,a,gFCLX,oIACIC,EADJ,QASIC,EAAY,qBACd,aACA,YACA,sBACA,EACA,KACA,KACA,MACA,EACA,gBACAD,GAGFC,EAAUC,QAAQC,OAAS,wBACZ,aAAAF,E,0CCvBf,uQ,iCCAA,IAAIG,EAAJ,0LACA,IAAIC,EAAS,WACX,IAAIC,EAAMC,KACNC,EAAKF,EAAIG,eAETC,GADKJ,EAAIK,MAAMC,GACVN,EAAIO,QAAQC,QACjBC,EAAKT,EAAIO,QAAQC,OACrBR,EAAIU,IAAIC,KAAOC,OAAOC,OACpB,GACA,CACEC,MAAO,CACLV,GAAIA,EACJK,GAAIA,MAKRM,GAAmB,EACnBC,EAAkB,GACtBjB,EAAOkB,eAAgB,G,iCCnBvB,yHAA+qB,eAAG,G,2HCqFlrB,IAEA,EACA,EACA,EAJA,WAKA,OACA,CACAN,gBACA,OACAO,UACAC,UACAC,YACAC,uCACAd,WACAe,UACAC,UAGAC,mBAEA,GADAnB,QACA,KAMA,OALAA,2BACAoB,uBACAC,mBACA,MAKAC,OACAC,SACAvB,aACAA,kBAEAwB,SACAC,wBACAzB,SACA,iBACAqB,yBACAK,eAGA,kBACAL,yBACAK,gBAIAC,oBACAN,eACAK,iBAGA1B,sBACA4B,OACA,kBACAP,gBACA,SACA,SACAR,yBACA,OACA,gBACA,YACA,cACA,mBAMA,GAJA,kBACAgB,WACAA,iCAEA,oBACA,4BACA,KACAC,yBACAvC,QACA,QACA,gBAGAsC,YAEAf,eAEAd,WACAA,cACA,mBACAqB,gBACArB,uBAGA+B,2BACA,qBACA/B,oBACAA,0CAEAgC,6BAGA,IAFA,0BACAlB,iBACA,wBACAmB,gBACA,+BACA,qBACAA,gBACA,SAKAC,4BACAlC,kCAEAmC,+BACAnC,4BAEAoC,2BACApC,yBAEAqC,uBACAhB,eACAiB,QACAC,mCACAC,oBACA,sBACAnB,cACAoB,uCACAC,cACAC,YACAC,QACA,2CAEAJ,oBACA,yBACAxC,gCAEA6C,gBACA7C,6BAMA8C,sBACAzB,gBACA0B,eACAC,uCAGAC,mBACA5B,aACAK,WACAwB,sBACAC,iBACAC,iBACAC,sBACAC,uBACAd,oBACA,WACAxC,sDAKAuD,kBACA,SAEAC,KACA,SACA,GACAC,iBACAxC,gBACAyC,cAEA,kBACAR,yCAEA,8BACA,IACApC,yBACA,SACA,eACA,YACA6C,0BACA,aACA,MACA,eAGA,IAFA,SACA,YACA,uBACA,iBACA9B,mBAGA8B,cACA,MACA,WACA,eACA,aACA,QACAA,UACA,MAEA,6CACA,iCAGArD,QACA,cACA,aAGA,SAGA,OAFAkD,KACAxD,wBACA,EAEAkD,cAEA7B,eACAK,iBAEA1B,uBACA4B,KACAV,OACAgC,YACA,kBACAM,KACAnC,gBACArB,iCACAoB,uBACA,gCACAwC,oBACAC,YACA3C,oBAGAG,mBACA,SACA,mBACAmC,KACAnC,gBACArB,0BAIA,c,6DCzUA,yHAA0wC,eAAG,G","file":"pages/plan/dotask.js","sourcesContent":["import 'uni-pages';\n// @ts-ignore\nwx.__webpack_require_UNI_MP_PLUGIN__ = __webpack_require__;\nimport Vue from 'vue'\nimport Page from './pages/plan/dotask.vue'\ncreatePage(Page)","import { render, staticRenderFns, recyclableRender, components } from \"./dotask.vue?vue&type=template&id=7ebf1f4d&\"\nvar renderjs\nimport script from \"./dotask.vue?vue&type=script&lang=js&\"\nexport * from \"./dotask.vue?vue&type=script&lang=js&\"\nimport style0 from \"./dotask.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null,\n  false,\n  components,\n  renderjs\n)\n\ncomponent.options.__file = \"pages/plan/dotask.vue\"\nexport default component.exports","export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/templateLoader.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--17-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/template.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-uni-app-loader/page-meta.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./dotask.vue?vue&type=template&id=7ebf1f4d&\"","var components\nvar render = function () {\n  var _vm = this\n  var _h = _vm.$createElement\n  var _c = _vm._self._c || _h\n  var g0 = _vm.imgList.length\n  var g1 = _vm.imgList.length\n  _vm.$mp.data = Object.assign(\n    {},\n    {\n      $root: {\n        g0: g0,\n        g1: g1,\n      },\n    }\n  )\n}\nvar recyclableRender = false\nvar staticRenderFns = []\nrender._withStripped = true\n\nexport { render, staticRenderFns, recyclableRender, components }","import mod from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./dotask.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/babel-loader/lib/index.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--13-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/script.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./dotask.vue?vue&type=script&lang=js&\"","<template>\r\n\t<view class=\"container\">\r\n\t\t<view class=\"form\">\r\n\t\t\t<form>\r\n\t\t\t\t<block v-for=\"(item, index) in fields\" :key=\"index\">\r\n\t\t\t\t\t<view class=\"cu-form-group margin-top-sm\" v-if=\"item.type == 'text'\">\r\n\t\t\t\t\t\t<view class=\"title\">{{item.label}}</view>\r\n\t\t\t\t\t\t<input type=\"text\" :name=\"item.name\" v-model=\"values[item.name].value\"></input>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"cu-form-group margin-top-sm border-custom\" v-if=\"item.type == 'number'\">\r\n\t\t\t\t\t\t<view class=\"title\">{{item.label}}</view>\r\n\t\t\t\t\t\t<input type=\"number\" :name=\"item.name\" v-model=\"values[item.name].value\"></input>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"cu-form-group margin-top-sm align-start\" v-if=\"item.type == 'textarea'\">\r\n\t\t\t\t\t\t<view class=\"title\">{{item.label}}</view>\r\n\t\t\t\t\t\t<textarea maxlength=\"-1\" @input=\"textareaInput($event, item.name)\"></textarea>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"cu-form-group margin-top-sm\" v-if=\"item.type == 'radio'\">\r\n\t\t\t\t\t\t<view class=\"title\">{{item.label}}</view>\r\n\t\t\t\t\t\t<picker @change=\"pickerChange($event, item.name)\" :value=\"index\"\r\n\t\t\t\t\t\t\t:range=\"values[item.name].options\">\r\n\t\t\t\t\t\t\t<view class=\"picker text-grey\">\r\n\t\t\t\t\t\t\t\t{{values[item.name].index > -1 ? values[item.name]['options'][values[item.name].index] : '请选择'}}\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</picker>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<checkbox-group class=\"block margin-top-sm\" @change=\"checkboxChange($event, item.name)\"\r\n\t\t\t\t\t\tv-if=\"item.type == 'multiple'\">\r\n\t\t\t\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t\t\t\t<view class=\"title\">{{item.label}}</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"cu-form-group\" v-for=\"(option, key) in values[item.name].options\" :key=\"key\">\r\n\t\t\t\t\t\t\t<view class=\"title text-grey\">{{option.value}}</view>\r\n\t\t\t\t\t\t\t<checkbox class=\"blue\" :class=\"option.checked?'checked':''\"\r\n\t\t\t\t\t\t\t\t:checked=\"option.checked?true:false\" :value=\"option.value\"></checkbox>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</checkbox-group>\r\n\t\t\t\t</block>\r\n\r\n\t\t\t\t<view class=\"cu-form-group margin-top-sm\" v-if=\"type == 'inspection'\">\r\n\t\t\t\t\t<view class=\"title text-bold\" style=\"color: red;\">巡检结果</view>\r\n\t\t\t\t\t<picker @change=\"pickerStatusChange\" :value=\"workIndex\" :range=\"workStatus\">\r\n\t\t\t\t\t\t<view class=\"picker text-grey\">\r\n\t\t\t\t\t\t\t{{workIndex > -1 ? workStatus[workIndex] : '请选择'}}\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</picker>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"cu-bar bg-white margin-top-sm\">\r\n\t\t\t\t\t<view class=\"action text-df text-black\">\r\n\t\t\t\t\t\t现场照片\r\n\t\t\t\t\t</view>\r\n\t\t\t\t\t<view class=\"action\">\r\n\t\t\t\t\t\t{{imgList.length}}/4\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\t\t\t\t<view class=\"cu-form-group\">\r\n\t\t\t\t\t<view class=\"grid col-4 grid-square flex-sub\">\r\n\t\t\t\t\t\t<view class=\"bg-img\" v-for=\"(item,index) in imgList\" :key=\"index\" @tap=\"viewImage\"\r\n\t\t\t\t\t\t\t:data-url=\"imgList[index]\">\r\n\t\t\t\t\t\t\t<image :src=\"imgList[index]\" mode=\"aspectFill\"></image>\r\n\t\t\t\t\t\t\t<view class=\"cu-tag bg-red\" @tap.stop=\"delImg\" :data-index=\"index\">\r\n\t\t\t\t\t\t\t\t<text class='cuIcon-close'></text>\r\n\t\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t\t<view class=\"solids\" @tap=\"chooseImage\" v-if=\"imgList.length<4\">\r\n\t\t\t\t\t\t\t<text class='cuIcon-cameraadd'></text>\r\n\t\t\t\t\t\t</view>\r\n\t\t\t\t\t</view>\r\n\t\t\t\t</view>\r\n\r\n\t\t\t\t<view class=\"cu-form-group margin-top-sm\">\r\n\t\t\t\t\t<textarea maxlength=\"-1\" @input=\"textareaRemark\" placeholder=\"备注\"></textarea>\r\n\t\t\t\t</view>\r\n\t\t\t</form>\r\n\t\t</view>\r\n\r\n\t\t<view style=\"height: 60px;\"></view>\r\n\t\t<view class=\"cu-bar bg-white tabbar flex flex-wrap\" @click=\"submit()\">\r\n\t\t\t<button class=\"bg-black submit basis-sm\" style=\"border-radius: 0;\">提交</button>\r\n\t\t</view>\r\n\t</view>\r\n</template>\r\n\r\n<script>\r\n\timport Config from '@/utils/config.js'\r\n\r\n\tvar taskId\r\n\tvar taskType\r\n\tvar _self\r\n\tvar flag = false\r\n\texport default {\r\n\t\tdata() {\r\n\t\t\treturn {\r\n\t\t\t\tfields: [],\r\n\t\t\t\tvalues: {},\r\n\t\t\t\tworkIndex: 0,\r\n\t\t\t\tworkStatus: ['正常', '带病运行', '停机待修', '停机报废'],\r\n\t\t\t\timgList: [],\r\n\t\t\t\tremark: '',\r\n\t\t\t\ttype: ''\r\n\t\t\t}\r\n\t\t},\r\n\t\tonLoad(e) {\r\n\t\t\t_self = this;\r\n\t\t\tif (!e.id) {\r\n\t\t\t\t_self.tui.toast(\"未知计划任务\");\r\n\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\tuni.navigateBack();\r\n\t\t\t\t}, 1500)\r\n\r\n\t\t\t\treturn\r\n\t\t\t}\r\n\r\n\t\t\ttaskId = e.id;\r\n\t\t\ttaskType = e.type;\r\n\t\t\t_self.getInfo(taskId);\r\n\t\t\t_self.changeTitle(taskType);\r\n\t\t},\r\n\t\tmethods: {\r\n\t\t\tchangeTitle(type) {\r\n\t\t\t\t_self.type = type;\r\n\t\t\t\tif (type == 'inspection') {\r\n\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\ttitle: '巡检计划'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tif (type == 'maintenance') {\r\n\t\t\t\t\tuni.setNavigationBarTitle({\r\n\t\t\t\t\t\ttitle: '保养计划'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\tgetInfo(id) {\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '查询中...'\r\n\t\t\t\t});\r\n\r\n\t\t\t\t_self.$api.planTaskField({\r\n\t\t\t\t\tid\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\tvar values = {};\r\n\t\t\t\t\tvar fields = res.data\r\n\t\t\t\t\tfields.forEach((field, index) => {\r\n\t\t\t\t\t\tvar value = {\r\n\t\t\t\t\t\t\t'value': field.default,\r\n\t\t\t\t\t\t\t'type': field.type,\r\n\t\t\t\t\t\t\t'label': field.label,\r\n\t\t\t\t\t\t\t'require': field.require,\r\n\t\t\t\t\t\t};\r\n\t\t\t\t\t\tif (field.type == 'radio') {\r\n\t\t\t\t\t\t\tvalue.index = -1;\r\n\t\t\t\t\t\t\tvalue.options = JSON.parse(field.options);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (field.type == 'multiple') {\r\n\t\t\t\t\t\t\tvar optionArr = JSON.parse(field.options);\r\n\t\t\t\t\t\t\tvar options = []\r\n\t\t\t\t\t\t\toptionArr.forEach((item, key) => {\r\n\t\t\t\t\t\t\t\toptions.push({\r\n\t\t\t\t\t\t\t\t\t'value': item,\r\n\t\t\t\t\t\t\t\t\t'checked': false\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t\tvalue.options = options;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tvalues[field.name] = value;\r\n\t\t\t\t\t})\r\n\t\t\t\t\t_self.values = values;\r\n\t\t\t\t\t_self.fields = fields;\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t_self.tui.toast(err.msg);\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tpickerChange(e, name) {\r\n\t\t\t\tvar index = e.detail.value;\r\n\t\t\t\t_self.values[name].index = index;\r\n\t\t\t\t_self.values[name].value = _self.values[name].options[index];\r\n\t\t\t},\r\n\t\t\tcheckboxChange(e, name) {\r\n\t\t\t\tvar items = _self.values[name].options,\r\n\t\t\t\t\tvalues = e.detail.value;\r\n\t\t\t\tfor (var i = 0, lenI = items.length; i < lenI; ++i) {\r\n\t\t\t\t\titems[i].checked = false;\r\n\t\t\t\t\tfor (var j = 0, lenJ = values.length; j < lenJ; ++j) {\r\n\t\t\t\t\t\tif (items[i].value == values[j]) {\r\n\t\t\t\t\t\t\titems[i].checked = true;\r\n\t\t\t\t\t\t\tbreak\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ttextareaInput(e, name) {\r\n\t\t\t\t_self.values[name].value = e.detail.value;\r\n\t\t\t},\r\n\t\t\tpickerStatusChange(e) {\r\n\t\t\t\t_self.workIndex = e.detail.value;\r\n\t\t\t},\r\n\t\t\ttextareaRemark(e) {\r\n\t\t\t\t_self.remark = e.detail.value;\r\n\t\t\t},\r\n\t\t\tchooseImage() {\r\n\t\t\t\tuni.chooseImage({\r\n\t\t\t\t\tcount: 1,\r\n\t\t\t\t\tsizeType: ['original', 'compressed'], //可以指定是原图还是压缩图，默认二者都有\r\n\t\t\t\t\tsuccess: (chooseImageRes) => {\r\n\t\t\t\t\t\tconst tempFilePaths = chooseImageRes.tempFilePaths\r\n\t\t\t\t\t\tuni.uploadFile({\r\n\t\t\t\t\t\t\turl: Config.host + 'api/common/upload',\r\n\t\t\t\t\t\t\tfilePath: tempFilePaths[0],\r\n\t\t\t\t\t\t\tname: 'file',\r\n\t\t\t\t\t\t\theader: {\r\n\t\t\t\t\t\t\t\t'token': uni.getStorageSync('equipment_token')\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tsuccess: (uploadFileRes) => {\r\n\t\t\t\t\t\t\t\tlet result = JSON.parse(uploadFileRes.data)\r\n\t\t\t\t\t\t\t\t_self.imgList.push(result.data.fullurl)\r\n\t\t\t\t\t\t\t},\r\n\t\t\t\t\t\t\tfail: () => {\r\n\t\t\t\t\t\t\t\t_self.tui.toast('图片上传失败')\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t})\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tviewImage(e) {\r\n\t\t\t\tuni.previewImage({\r\n\t\t\t\t\turls: _self.imgList,\r\n\t\t\t\t\tcurrent: e.currentTarget.dataset.url\r\n\t\t\t\t});\r\n\t\t\t},\r\n\t\t\tdelImg(e) {\r\n\t\t\t\tuni.showModal({\r\n\t\t\t\t\ttitle: '提示',\r\n\t\t\t\t\tcontent: '确定要删除这张照片吗？',\r\n\t\t\t\t\tcancelText: '再看看',\r\n\t\t\t\t\tconfirmText: '确定',\r\n\t\t\t\t\tcancelColor: '#8799a3',\r\n\t\t\t\t\tconfirmColor: '#333333',\r\n\t\t\t\t\tsuccess: res => {\r\n\t\t\t\t\t\tif (res.confirm) {\r\n\t\t\t\t\t\t\t_self.imgList.splice(e.currentTarget.dataset.index, 1)\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t})\r\n\t\t\t},\r\n\t\t\tsubmit() {\r\n\t\t\t\tif (flag == true) return;\r\n\r\n\t\t\t\tflag = true;\r\n\t\t\t\tvar data = [];\r\n\t\t\t\tvar content = {\r\n\t\t\t\t\timages: _self.imgList,\r\n\t\t\t\t\tremark: _self.remark,\r\n\t\t\t\t\tform_data: []\r\n\t\t\t\t};\r\n\t\t\t\tif (taskType == 'inspection') {\r\n\t\t\t\t\tcontent.work_status = _self.workStatus[_self.workIndex];\r\n\t\t\t\t}\r\n\t\t\t\tvar values = Object.values(_self.values);\r\n\t\t\t\ttry {\r\n\t\t\t\t\tvalues.forEach((item, key) => {\r\n\t\t\t\t\t\tvar string = '';\r\n\t\t\t\t\t\tswitch (item.type) {\r\n\t\t\t\t\t\t\tcase 'radio':\r\n\t\t\t\t\t\t\t\tstring = item.options[item.index];\r\n\t\t\t\t\t\t\t\tif (string == undefined) string = '';\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'multiple':\r\n\t\t\t\t\t\t\t\tvar value = [];\r\n\t\t\t\t\t\t\t\tvar options = item.options;\r\n\t\t\t\t\t\t\t\tfor (var i = 0, lenI = options.length; i < lenI; ++i) {\r\n\t\t\t\t\t\t\t\t\tif (options[i].checked == true) {\r\n\t\t\t\t\t\t\t\t\t\tvalue.push(options[i].value);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\tstring = value.join('、');\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\tcase 'text':\r\n\t\t\t\t\t\t\tcase 'textarea':\r\n\t\t\t\t\t\t\tcase 'number':\r\n\t\t\t\t\t\t\tdefault:\r\n\t\t\t\t\t\t\t\tstring = item.value;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tif (item.require == 1 && (string == '' || string == null || string == undefined)) {\r\n\t\t\t\t\t\t\tthrow new Error(item.label + ' 不能为空');\r\n\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tdata.push({\r\n\t\t\t\t\t\t\t'label': item.label,\r\n\t\t\t\t\t\t\t'value': string\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t});\r\n\t\t\t\t} catch (e) {\r\n\t\t\t\t\tflag = false;\r\n\t\t\t\t\t_self.tui.toast(e.message);\r\n\t\t\t\t\treturn false;\r\n\t\t\t\t}\r\n\t\t\t\tcontent.form_data = data;\r\n\r\n\t\t\t\tuni.showLoading({\r\n\t\t\t\t\ttitle: '提交中...'\r\n\t\t\t\t});\r\n\t\t\t\t_self.$api.submitPlanTask({\r\n\t\t\t\t\tid: taskId,\n\t\t\t\t\ttype: taskType,\r\n\t\t\t\t\tcontent\r\n\t\t\t\t}).then((res) => {\r\n\t\t\t\t\tflag = false;\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t_self.tui.toast('提交成功', '', 'success')\r\n\t\t\t\t\tsetTimeout(function() {\r\n\t\t\t\t\t\tconst eventChannel = _self.getOpenerEventChannel();\r\n\t\t\t\t\t\teventChannel.emit('doRefresh', {\r\n\t\t\t\t\t\t\tischange: true,\r\n\t\t\t\t\t\t\ttype: 'inspection'\r\n\t\t\t\t\t\t});\r\n\r\n\t\t\t\t\t\tuni.navigateBack();\r\n\t\t\t\t\t}, 1500)\r\n\t\t\t\t}).catch((err) => {\r\n\t\t\t\t\tflag = false;\r\n\t\t\t\t\tuni.hideLoading();\r\n\t\t\t\t\t_self.tui.toast(err.msg);\r\n\t\t\t\t})\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n\tpage {\r\n\t\tbackground-color: #F1F4F6;\r\n\t}\r\n\r\n\t.cu-form-group .title {\r\n\t\tcolor: #333333;\r\n\t\tfont-size: 28rpx;\r\n\t\tmin-width: calc(4em + 15px);\r\n\t}\r\n\r\n\t.cu-form-group+.cu-form-group.margin-top-sm {\r\n\t\tborder: 0;\r\n\t}\r\n\r\n\t.text-df {\r\n\t\tfont-size: 28rpx !important;\r\n\t}\r\n\r\n\t.text-grey {\r\n\t\tcolor: #8799a3 !important;\r\n\t\tfont-size: 26rpx !important;\r\n\t}\r\n\r\n\t.cu-bar.tabbar {\r\n\t\tposition: fixed;\r\n\t\twidth: 100%;\r\n\t\tleft: 0;\r\n\t\tbottom: 0;\r\n\t}\r\n</style>\n","import mod from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./dotask.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/css-loader/dist/cjs.js??ref--8-oneOf-1-1!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/loaders/stylePostLoader.js!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-2!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-3!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/sass-loader/dist/cjs.js??ref--8-oneOf-1-4!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/webpack-preprocess-loader/index.js??ref--8-oneOf-1-5!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/vue-cli-plugin-uni/packages/vue-loader/lib/index.js??vue-loader-options!../../../../../../../../HBuilderX/plugins/uniapp-cli/node_modules/@dcloudio/webpack-uni-mp-loader/lib/style.js!./dotask.vue?vue&type=style&index=0&lang=scss&\""],"sourceRoot":""}