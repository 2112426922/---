(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/repair/repair"],{125:function(t,e,n){"use strict";(function(t,e){var i=n(4);n(26);i(n(25));var r=i(n(126));t.__webpack_require_UNI_MP_PLUGIN__=n,e(r.default)}).call(this,n(1)["default"],n(2)["createPage"])},126:function(t,e,n){"use strict";n.r(e);var i=n(127),r=n(129);for(var o in r)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return r[t]}))}(o);n(131);var u,a=n(32),c=Object(a["default"])(r["default"],i["render"],i["staticRenderFns"],!1,null,null,null,!1,i["components"],u);c.options.__file="pages/repair/repair.vue",e["default"]=c.exports},127:function(t,e,n){"use strict";n.r(e);var i=n(128);n.d(e,"render",(function(){return i["render"]})),n.d(e,"staticRenderFns",(function(){return i["staticRenderFns"]})),n.d(e,"recyclableRender",(function(){return i["recyclableRender"]})),n.d(e,"components",(function(){return i["components"]}))},128:function(t,e,n){"use strict";var i;n.r(e),n.d(e,"render",(function(){return r})),n.d(e,"staticRenderFns",(function(){return u})),n.d(e,"recyclableRender",(function(){return o})),n.d(e,"components",(function(){return i}));var r=function(){var t=this,e=t.$createElement;t._self._c},o=!1,u=[];r._withStripped=!0},129:function(t,e,n){"use strict";n.r(e);var i=n(130),r=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=r.a},130:function(t,e,n){"use strict";(function(t){var i=n(4);Object.defineProperty(e,"__esModule",{value:!0}),e.default=void 0;var r,o=i(n(38)),u=0,a=!1,c={data:function(){return{content:"",imgList:{fullurl:"",url:""},imgUpload:!1}},onLoad:function(e){if(r=this,!e.equipment_id)return r.tui.toast("未知设备"),void setTimeout((function(){t.navigateBack()}),1500);u=e.equipment_id},methods:{chooseImage:function(){t.chooseImage({count:1,sizeType:["original","compressed"],sourceType:["album"],success:function(e){var n=e.tempFilePaths;t.uploadFile({url:o.default.host+"api/common/upload",filePath:n[0],name:"file",header:{token:t.getStorageSync("equipment_token")},success:function(t){var e=JSON.parse(t.data);r.imgUpload=!0,r.imgList=e.data},fail:function(){r.imgUpload=!1,r.tui.toast("图片上传失败")}})}})},viewImage:function(e){t.previewImage({urls:[r.imgList.fullurl],current:e.currentTarget.dataset.url})},delImg:function(){t.showModal({title:"提示",content:"确定要删除这张照片吗？",cancelText:"再看看",confirmText:"确定",cancelColor:"#8799a3",confirmColor:"#333333",success:function(t){t.confirm&&(r.imgList={},r.imgUpload=!1)}})},textareaInput:function(t){r.content=t.detail.value},submit:function(){a||(u?""!=r.content?(t.showLoading({title:"提交中..."}),r.$api.repair({equipment_id:u,content:r.content,register_image:r.imgList.url}).then((function(e){a=!1,t.hideLoading(),r.tui.toast("报修成功","","success"),setTimeout((function(){var e=r.getOpenerEventChannel();e.emit("doRefresh",{ischange:!0,type:"register"}),t.navigateBack()}),1500)})).catch((function(e){a=!1,t.hideLoading(),r.tui.toast(e.msg)}))):r.tui.toast("报修登记不能为空"):r.tui.toast("未知设备"))}}};e.default=c}).call(this,n(2)["default"])},131:function(t,e,n){"use strict";n.r(e);var i=n(132),r=n.n(i);for(var o in i)["default"].indexOf(o)<0&&function(t){n.d(e,t,(function(){return i[t]}))}(o);e["default"]=r.a},132:function(t,e,n){}},[[125,"common/runtime","common/vendor"]]]);
//# sourceMappingURL=../../../.sourcemap/mp-weixin/pages/repair/repair.js.map